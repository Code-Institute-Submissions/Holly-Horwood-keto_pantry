{% extends 'base.html' %}
{% load bootstrap_tags %}
{% load static from staticfiles %}
{% block page_title %}{{ user }}'s Profile{% endblock %}
{% block page_heading %}{{ user }}'s Profile{% endblock %}
{% block messages %}
<div class="messages-status-success center">

    {% if messages %}
    {% for message in messages %}
    <p class='center'>{{ message }}</p>
    {% endfor %}
    {% endif %}

</div>
{% endblock %}

{% block content %}


<div class="col-xl-3 col-lg-4 col-md-4 col-sm-6 col-xs-12 mx-auto">
    <div class="card profile-card border-secondary mb-3">
        <div class="card-header w-100 text-center">Welcome {{ user }}</div>
        <div class="profile-body h-100 text-secondary">
            <table class='profile-table'>
                <tr>
                    <td>Username:&nbsp&nbsp;</td>
                    <td>{{ profile }}</td>
                </tr>
                <tr>
                    <td>Email:&#09; &nbsp;</td>
                    <td>{{ profile.email}}</td>
                </tr>
            </table>
            <hr>
            <a class="btn btn-danger text-center" href="{% url 'password_reset' %}">Change Your Password</a>
            <hr>
            <div class="profile-shop">
                <a href="/products/" class="shop-button btn-success btn" tabindex="0">Start shopping</a>
            </div>
            <hr>
            <div class="mt-4">
                <a class="btn btn-success" href="">View Order History</a>
            </div>
        </div>
        <div>
            {% for order in orders %}
                <h3>Your order will be shipped to:</h3>
                <p><b>Date Ordered:</b> {{ order.date }}</p>
                <p><b>Order ID:</b> {{ order.id }}</p>
                <p><b>Name:</b> {{ order.full_name }}</p>
                <p><b>Phone number:</b> {{ order.phone_number }}</p>
                <p><b>Country:</b> {{ order.country }}</p>
                <p><b>Postcode:</b> {{ order.postcode }}</p>
                <p><b>Town or city:</b> {{ order.town_or_city }}</p>
                <p><b>Address 1:</b> {{ order.street_address1 }}</p>
                <p><b>Address 2:</b> {{ order.street_address2 }}</p>
                <p><b>Region:</b> {{ order.region }}</p>
                    {% for order_line_item in order.order_line_item_set.all() %}
                    <p>Items: {{ order_line_item.quantity }}</p>
                    {% endfor %}
            {% endfor %}
        </div> 
    </div>
</div>

{% endblock %}